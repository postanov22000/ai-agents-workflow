<!-- templates/partials/new_transaction_gamified.html -->
<div class="p-4 gamified-form">
  <h2 class="mb-6 text-2xl font-bold">ğŸŒŸ Ready to Rock a New Deal?</h2>
  <form
    id="new-txn-form"
    hx-post="/transactions/new?user_id={{ user_id }}"
    hx-swap="none"
    class="space-y-6"
  >
    <!-- Progress Bar -->
    <div class="relative h-2 bg-gray-200 rounded-full overflow-hidden">
      <div id="progress-bar" class="absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-green-400" style="width:12.5%"></div>
      <span class="absolute top-2 left-1 text-sm font-medium">Stage 1/10</span>
    </div>

    <!-- MISSION 1: Property Quest -->
    <fieldset class="space-y-3 mission-card active">
      <legend class="text-lg font-semibold">ğŸ  Property Quest</legend>
      <div class="form-group">
        <label>ğŸ“ Address of Adventure</label>
        <input type="text" name="property_address" class="form-control" placeholder="e.g. 123 Elm St" required>
      </div>
      <div class="form-group grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ™ City</label>
          <input type="text" name="city" class="form-control" placeholder="e.g. Gotham" required>
        </div>
        <div>
          <label>ğŸŒ State</label>
          <input type="text" name="state" class="form-control" placeholder="e.g. NY" required>
        </div>
      </div>
    </fieldset>

    <!-- MISSION 2: Quick Property Details -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">ğŸ” Quick Property Details</legend>
      <div class="form-group">
        <label>ğŸ“ Description</label>
        <input type="text" name="description_of_property" class="form-control" placeholder="One-liner summary">
      </div>
      <div class="form-group grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ“ Sq. Feet</label>
          <input type="number" name="square_feet" class="form-control" placeholder="e.g. 1500">
        </div>
        <div>
          <label>ğŸ“œ Legal Desc.</label>
          <input type="text" name="legal_description" class="form-control" placeholder="Official details">
        </div>
      </div>
    </fieldset>

    <!-- MISSION 3: Cast & Crew -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">ğŸ‘¥ Cast & Crew</legend>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ­ Buyer Name</label>
          <input type="text" name="buyer_name" class="form-control" placeholder="Hero of the story" required>
        </div>
        <div>
          <label>ğŸ­ Seller Name</label>
          <input type="text" name="seller_name" class="form-control" placeholder="Your counterpart" required>
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ  Buyer Address</label>
          <input type="text" name="buyer_address" class="form-control" placeholder="Where they live">
        </div>
        <div>
          <label>ğŸ  Seller Address</label>
          <input type="text" name="seller_address" class="form-control" placeholder="Original owner address">
        </div>
      </div>
    </fieldset>

    <!-- MISSION 4: Deal Dynamics -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">ğŸ’° Deal Dynamics</legend>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ’¸ Offer Price</label>
          <input type="number" name="purchase_price" step="0.01" class="form-control" placeholder="e.g. 250000">
        </div>
        <div>
          <label>ğŸ’° Deposit</label>
          <input type="number" name="deposit_amount" step="0.01" class="form-control" placeholder="e.g. 5000">
        </div>
      </div>
    </fieldset>

    <!-- MISSION 5: Timeline -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">ğŸ—“ï¸ Timeline</legend>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ“† Agreement Date</label>
          <input type="date" name="agreement_date" class="form-control">
        </div>
        <div>
          <label>ğŸ“… Closing Date</label>
          <input type="date" name="closing_date" class="form-control">
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4 mt-4">
        <div>
          <label>ğŸšª Possession Date</label>
          <input type="date" name="possession_date" class="form-control">
        </div>
        <div>
          <label>ğŸ  Occupancy Date</label>
          <input type="date" name="occupy_property_date" class="form-control">
        </div>
      </div>
    </fieldset>

    <!-- MISSION 6: Financing -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">ğŸ¦ Financing</legend>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ’¼ Mortgage Amt.</label>
          <input type="number" name="mortgage_amount" class="form-control" placeholder="Loan amount">
        </div>
        <div>
          <label>ğŸ“† Term (years)</label>
          <input type="number" name="mortgage_years" class="form-control" placeholder="e.g. 30">
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4 mt-4">
        <div>
          <label>ğŸ“Š Interest %</label>
          <input type="number" step="0.01" name="interest_rate" class="form-control" placeholder="e.g. 3.5">
        </div>
        <div>
          <label>ğŸ” Inspection Days</label>
          <input type="number" name="inspection_days" class="form-control" placeholder="e.g. 10">
        </</div>
      </div>
    </fieldset>

    <!-- MISSION 7: Extras -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">â­ Extras & Details</legend>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ¢ Agency Name</label>
          <input type="text" name="agency_name" class="form-control" placeholder="Your agency">
        </div>
        <div>
          <label>ğŸ“‹ County</label>
          <input type="text" name="county" class="form-control" placeholder="e.g. King">
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4 mt-4">
        <div>
          <label>ğŸ“ Location Note</label>
          <input type="text" name="location" class="form-control" placeholder="Neighborhood details">
        </div>
        <div>
          <label>ğŸ¢ Structure Age</label>
          <input type="text" name="structure_age" class="form-control" placeholder="e.g. Built 1990">
        </div>
      </div>
    </fieldset>

    <!-- MISSION 8: Rent/Lease Terms -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">ğŸ˜ï¸ Rent/Lease Terms (optional)</legend>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ§¾ Rent Type</label>
          <input type="text" name="rent_type" class="form-control" placeholder="e.g. Month-to-month">
        </div>
        <div>
          <label>ğŸ’³ Agreed Rent</label>
          <input type="number" name="agreed_rent" class="form-control" placeholder="Amount">
        </div>
      </div>
      <div class="form-group mt-4">
        <label>ğŸ› ï¸ Maintenance Terms</label>
        <input type="text" name="maintenance_terms" class="form-control" placeholder="Who handles repairs?">
      </div>
    </fieldset>

    <!-- MISSION 9: Contact Info -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">ğŸ“ Landlord & Tenant Contacts</legend>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label>ğŸ“± Landlord Phone</label>
          <input type="tel" name="landlord_phone" class="form-control" placeholder="e.g. (123) 456-7890">
        </div>
        <div>
          <label>ğŸ“± Tenant Phone</label>
          <input type="tel" name="tenant_phone" class="form-control" placeholder="e.g. (098) 765-4321">
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4 mt-4">
        <div>
          <label>ğŸ“§ Landlord Email</label>
          <input type="email" name="landlord_email" class="form-control" placeholder="email@example.com">
        </div>
        <div>
          <label>ğŸ“§ Tenant Email</label>
          <input type="email" name="tenant_email" class="form-control" placeholder="email@example.com">
        </div>
      </div>
    </fieldset>

    <!-- MISSION 10: Final Sign & Go -->
    <fieldset class="space-y-3 mission-card">
      <legend class="text-lg font-semibold">âœï¸ Final Sign & Go</legend>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label>ğŸ–‹ Buyer Signature</label>
          <input type="text" name="buyer_signature" class="form-control" placeholder="Type full name">
        </div>
        <div>
          <label>ğŸ–‹ Seller Signature</label>
          <input type="text" name="seller_signature" class="form-control" placeholder="Type full name">
        </div>
      </div>
      <div class="form-group mt-4">
        <label>â± Timestamp</label>
        <input type="time" name="time" class="form-control">
      </div>
    </fieldset>

    <button type="submit" class="btn btn-gradient w-full py-3 mt-4 font-bold text-white">
      ğŸš€ Launch Deal! 
    </button>
  </form>
</div>
