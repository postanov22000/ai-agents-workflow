<!-- templates/partials/new_transaction_gamified.html -->
<div class="gf-container">
  <div class="gamified-form">
    <!-- Header -->
    <div class="header-section">
      <h2>🌟 Ready to Rock a New Deal?</h2>
      <p>Complete each mission to create your transaction. Let's make this fun!</p>
    </div>

    <!-- Progress -->
    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      <div class="progress-info">
        <span>Mission Progress</span>
        <span id="progress-text">1/10</span>
      </div>
    </div>
    <div class="confetti-container" id="confetti-container"></div>

    <form
      id="new-txn-form"
      action="/transactions/new?user_id={{ user_id }}"
      method="POST"
      class="px-0"
    >
      <div class="mission-container">

        <!-- Mission 1: Property Quest -->
        <div class="mission-card active" id="mission-1">
          <div class="mission-counter">Mission 1/10</div>
          <div class="mission-header">
            <div class="mission-icon">🏠</div>
            <div>
              <div class="mission-title">Property Quest</div>
              <div class="mission-description">Let's find your dream property!</div>
            </div>
          </div>
          <div class="form-group">
            <label for="property_address">📍 Address of Adventure</label>
            <input type="text" id="property_address" name="property_address" class="form-control" placeholder="e.g. 123 Elm St" required>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="city">🏙 City</label>
              <input type="text" id="city" name="city" class="form-control" placeholder="e.g. Gotham" required>
            </div>
            <div class="form-group">
              <label for="state">🌎 State</label>
              <input type="text" id="state" name="state" class="form-control" placeholder="e.g. NY" required>
            </div>
          </div>
        </div>

        <!-- Mission 2: Quick Property Details -->
        <div class="mission-card" id="mission-2">
          <div class="mission-counter">Mission 2/10</div>
          <div class="mission-header">
            <div class="mission-icon">🔍</div>
            <div>
              <div class="mission-title">Quick Property Details</div>
              <div class="mission-description">Tell us more about the property</div>
            </div>
          </div>
          <div class="form-group">
            <label for="description_of_property">📝 Description</label>
            <input type="text" id="description_of_property" name="description_of_property" class="form-control" placeholder="One‑liner summary">
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="square_feet">📏 Sq. Feet</label>
              <input type="number" id="square_feet" name="square_feet" class="form-control" placeholder="e.g. 1500">
            </div>
            <div class="form-group">
              <label for="legal_description">📜 Legal Desc.</label>
              <input type="text" id="legal_description" name="legal_description" class="form-control" placeholder="Official details">
            </div>
          </div>
          <!-- new -->
          <div class="form-group">
            <label for="premises_description">📋 Premises Description</label>
            <input type="text" id="premises_description" name="premises_description" class="form-control" placeholder="e.g. 2-bed, 2-bath floor plan">
          </div>
        </div>

        <!-- Mission 3: Cast & Crew -->
        <div class="mission-card" id="mission-3">
          <div class="mission-counter">Mission 3/10</div>
          <div class="mission-header">
            <div class="mission-icon">👥</div>
            <div>
              <div class="mission-title">Cast & Crew</div>
              <div class="mission-description">Who's involved in this deal?</div>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="buyer_name">🎭 Buyer Name</label>
              <input type="text" id="buyer_name" name="buyer_name" class="form-control" placeholder="Hero of the story" required>
            </div>
            <div class="form-group">
              <label for="seller_name">🎭 Seller Name</label>
              <input type="text" id="seller_name" name="seller_name" class="form-control" placeholder="Your counterpart" required>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="buyer_address">🏠 Buyer Address</label>
              <input type="text" id="buyer_address" name="buyer_address" class="form-control" placeholder="Where they live">
            </div>
            <div class="form-group">
              <label for="seller_address">🏠 Seller Address</label>
              <input type="text" id="seller_address" name="seller_address" class="form-control" placeholder="Original owner address">
            </div>
          </div>
        </div>

        <!-- Mission 4: Deal Dynamics -->
        <div class="mission-card" id="mission-4">
          <div class="mission-counter">Mission 4/10</div>
          <div class="mission-header">
            <div class="mission-icon">💰</div>
            <div>
              <div class="mission-title">Deal Dynamics</div>
              <div class="mission-description">Let's talk numbers!</div>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="purchase_price">💸 Offer Price</label>
              <input type="number" id="purchase_price" name="purchase_price" step="0.01" class="form-control" placeholder="e.g. 250000" required>
            </div>
            <div class="form-group">
              <label for="deposit_amount">💰 Deposit</label>
              <input type="number" id="deposit_amount" name="deposit_amount" step="0.01" class="form-control" placeholder="e.g. 5000" required>
            </div>
          </div>
          <div class="form-group">
            <label for="earnest_money_held_by">🏦 Earnest Money Held By</label>
            <input type="text" id="earnest_money_held_by" name="earnest_money_held_by" class="form-control" placeholder="e.g. Escrow Company">
          </div>
        </div>

        <!-- Mission 5: Timeline -->
        <div class="mission-card" id="mission-5">
          <div class="mission-counter">Mission 5/10</div>
          <div class="mission-header">
            <div class="mission-icon">🗓️</div>
            <div>
              <div class="mission-title">Timeline</div>
              <div class="mission-description">When will things happen?</div>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="agreement_date">📆 Agreement Date</label>
              <input type="date" id="agreement_date" name="agreement_date" class="form-control">
            </div>
            <div class="form-group">
              <label for="closing_date">📅 Closing Date</label>
              <input type="date" id="closing_date" name="closing_date" class="form-control">
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="possession_date">🚪 Possession Date</label>
              <input type="date" id="possession_date" name="possession_date" class="form-control">
            </div>
            <div class="form-group">
              <label for="occupy_property_date">🏠 Occupancy Date</label>
              <input type="date" id="occupy_property_date" name="occupy_property_date" class="form-control">
            </div>
          </div>
        </div>

        <!-- Mission 6: Financing -->
        <div class="mission-card" id="mission-6">
          <div class="mission-counter">Mission 6/10</div>
          <div class="mission-header">
            <div class="mission-icon">🏦</div>
            <div>
              <div class="mission-title">Financing</div>
              <div class="mission-description">How will this deal be funded?</div>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="mortgage_amount">💼 Mortgage Amt.</label>
              <input type="number" id="mortgage_amount" name="mortgage_amount" class="form-control" placeholder="Loan amount">
            </div>
            <div class="form-group">
              <label for="mortgage_years">📆 Term (years)</label>
              <input type="number" id="mortgage_years" name="mortgage_years" class="form-control" placeholder="e.g. 30">
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="interest_rate">📊 Interest %</label>
              <input type="number" step="0.01" id="interest_rate" name="interest_rate" class="form-control" placeholder="e.g. 3.5">
            </div>
            <div class="form-group">
              <label for="inspection_days">🔍 Inspection Days</label>
              <input type="number" id="inspection_days" name="inspection_days" class="form-control" placeholder="e.g. 10">
            </div>
          </div>
        </div>

        <!-- Mission 7: Extras & Details -->
        <div class="mission-card" id="mission-7">
          <div class="mission-counter">Mission 7/10</div>
          <div class="mission-header">
            <div class="mission-icon">⭐</div>
            <div>
              <div class="mission-title">Extras & Details</div>
              <div class="mission-description">Additional important information</div>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="agency_name">🏢 Agency Name</label>
              <input type="text" id="agency_name" name="agency_name" class="form-control" placeholder="Your agency">
            </div>
            <div class="form-group">
              <label for="county">📋 County</label>
              <input type="text" id="county" name="county" class="form-control" placeholder="e.g. King">
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="location">📍 Location Note</label>
              <input type="text" id="location" name="location" class="form-control" placeholder="Neighborhood details">
            </div>
            <div class="form-group">
              <label for="structure_age">🏢 Structure Age</label>
              <input type="text" id="structure_age" name="structure_age" class="form-control" placeholder="e.g. Built 1990">
            </div>
          </div>
          <!-- new -->
          <div class="form-group">
            <label for="additional_explanations">🗒️ Additional Explanations</label>
            <textarea id="additional_explanations" name="additional_explanations" class="form-control" placeholder="Any extra context…"></textarea>
          </div>
        </div>

        <!-- Mission 8: Rent/Lease Terms -->
        <div class="mission-card" id="mission-8">
          <div class="mission-counter">Mission 8/10</div>
          <div class="mission-header">
            <div class="mission-icon">🏘️</div>
            <div>
              <div class="mission-title">Rent/Lease Terms</div>
              <div class="mission-description">Optional rental details</div>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="rent_type">🧾 Rent Type</label>
              <select id="rent_type" name="rent_type" class="form-control">
                <option value="">Select rent type</option>
                <option value="Month-to-month">Month-to-month</option>
                <option value="Annual Lease">Annual Lease</option>
                <option value="Short-term">Short-term</option>
                <option value="Other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="agreed_rent">💳 Agreed Rent</label>
              <input type="number" id="agreed_rent" name="agreed_rent" class="form-control" placeholder="Amount">
            </div>
          </div>
          <div class="form-group">
            <label for="maintenance_terms">🛠️ Maintenance Terms</label>
            <input type="text" id="maintenance_terms" name="maintenance_terms" class="form-control" placeholder="Who handles repairs?">
          </div>
        </div>

        <!-- Mission 9: Contacts -->
        <div class="mission-card" id="mission-9">
          <div class="mission-counter">Mission 9/10</div>
          <div class="mission-header">
            <div class="mission-icon">📞</div>
            <div>
              <div class="mission-title">Landlord & Tenant Contacts</div>
              <div class="mission-description">How to reach the parties</div>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="landlord_phone">📱 Landlord Phone</label>
              <input type="tel" id="landlord_phone" name="landlord_phone" class="form-control" placeholder="(123) 456-7890">
            </div>
            <div class="form-group">
              <label for="tenant_phone">📱 Tenant Phone</label>
              <input type="tel" id="tenant_phone" name="tenant_phone" class="form-control" placeholder="(098) 765-4321">
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="landlord_email">📧 Landlord Email</label>
              <input type="email" id="landlord_email" name="landlord_email" class="form-control" placeholder="email@example.com">
            </div>
            <div class="form-group">
              <label for="tenant_email">📧 Tenant Email</label>
              <input type="email" id="tenant_email" name="tenant_email" class="form-control" placeholder="email@example.com">
            </div>
          </div>
        </div>

        <!-- Mission 10: Final Sign & Go -->
        <div class="mission-card" id="mission-10">
          <div class="mission-counter">Mission 10/10</div>
          <div class="mission-header">
            <div class="mission-icon">✍️</div>
            <div>
              <div class="mission-title">Final Sign & Go</div>
              <div class="mission-description">Almost there! Just need signatures</div>
            </div>
          </div>
          <div class="grid-2">
            <div class="form-group">
              <label for="buyer_signature">🖋 Buyer Signature</label>
              <input type="text" id="buyer_signature" name="buyer_signature" class="form-control" placeholder="Type full name" required>
            </div>
            <div class="form-group">
              <label for="seller_signature">🖋 Seller Signature</label>
              <input type="text" id="seller_signature" name="seller_signature" class="form-control" placeholder="Type full name" required>
            </div>
          </div>
          <div class="form-group">
            <label for="time">⏱ Timestamp</label>
            <input type="time" id="time" name="time" class="form-control">
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" name="terms_agreed" required>
              I agree to the terms and conditions
            </label>
          </div>
        </div>

        <div class="achievement-badge" id="achievement-badge">Mission Complete! 🎉</div>
      </div>

      <!-- navigation buttons -->
      <div class="navigation">
        <button type="button" class="btn btn-prev" id="btn-prev">
          <i class="fas fa-arrow-left"></i> Previous
        </button>
        <button type="button" class="btn btn-next" id="btn-next">
          Next Mission <i class="fas fa-arrow-right"></i>
        </button>
      </div>
    </form>
  </div>
</div>
